<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Facebook/insta icons -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Main CSS-->
    <link href="../../static/css/styles.css" th:href="@{/css/styles.css}" rel="stylesheet" />

</head>

<body>
<p th:text="${id_product}"></p>
<title>test</title>
<div class="page-wrapper">

    <!-- MENU SIDEBAR-->
    <aside class="menu-sidebar d-none d-lg-block">
        <div class="logo">
            <a th:href="@{/product/productList/1}">
                <img src="/images/logo.png" alt="Strona glowna" style="height: 70px">
            </a>
        </div>
        <div class="menu-sidebar-content js-scrollbar1">
            <nav class="navbar-sidebar">
                <ul class="list-unstyled navbar-list">

                    <form method="post" th:action="@{/product/productList/1}"
                          th:object="${categoryList}" id="getforma">


                        <!--<label for="price_min" >Cena od:</label><br>-->
                        <input type="number" id="price_min" th:name="price_min" th:value="${price_min}" onfocusout="this.form.submit()" style="width: 100px; background-color: #0da8e4; text-align: center; " placeholder="Cena od: "><br>

                        <br>
                        <!--<label for="price_max" >Cena do:</label><br>-->
                        <input type="number" id="price_max" th:name="price_max" th:value="${price_max}" onfocusout="this.form.submit()" style="width: 100px; background-color: #0da8e4; text-align: center; " placeholder="Cena do: ">

                        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
                        <br><br>
                        <button class="btn btn-secondary dropdown-toggle" name="drop_category" th:value="${value_category}" style="width: 100px; background-color: #0da8e4">Kategorie</button>

                        <li th:hidden="${hidden_category}" th:each="category: ${categoryList}" style="color: black;">
                            <input type="checkbox" th:value="${category.id_category}" th:name="listOfCategoryChecked" th:checked="${categoryCheckedList?.contains(category)}" onclick="this.form.submit()"/>
                            <label th:text="${category.name}"></label>

                            <ul th:if="${categoryCheckedList?.contains(category)}">
                                <li th:if="${size.getId_category().getId_category()==category.getId_category()}" th:each="size: ${sizesList}">
                                    <input type="checkbox"  th:value="${size.getProduct_size()}" th:name="listOfSizesChecked" th:checked="${sizesCheckedList?.contains(size.getProduct_size())}" onclick="this.form.submit()"/>
                                    <label th:text="${size.getProduct_size()}"></label><br>
                                </li>
                            </ul>
                        </li>

                        <br><br>

                        <!--  -->
                        <button class="btn btn-secondary dropdown-toggle" name="drop_age" th:value="${value_age}" style="width: 100px; background-color: #0da8e4">Wiek</button>
                        <li th:hidden="${hidden_age}" th:each="age: ${agesList}">
                            <input type="checkbox" th:value="${age}"  th:name="listOfAgesChecked" th:checked="${agesCheckedList?.contains(age)}" onclick="this.form.submit()"/>
                            <label th:text="${age}"></label>
                        </li>

                        <br><br>
                        <button class="btn btn-secondary dropdown-toggle" name="drop_gender" th:value="${value_gender}" style="width: 100px; background-color: #0da8e4">Płeć</button>
                        <li th:hidden="${hidden_gender}" th:each="gender: ${genderList}">
                            <input type="checkbox" th:value="${gender}"  th:name="listOfGenderChecked" th:checked="${genderCheckedList?.contains(gender)}" onclick="this.form.submit()"/>
                            <label th:text="${gender}"></label>
                        </li>

                        <br><br>
                        <button class="btn btn-secondary dropdown-toggle" name="drop_season" th:value="${value_season}" style="width: 100px; background-color: #0da8e4">Sezon</button>
                        <li th:hidden="${hidden_season}" th:each="season: ${seasonList}">
                            <input type="checkbox" th:value="${season}"  th:name="listOfSeasonChecked" th:checked="${seasonCheckedList?.contains(season)}" onclick="this.form.submit()"/>
                            <label th:text="${season}"></label>
                        </li>
                    </form>
                </ul>

            </nav>
        </div>
    </aside>
    <!-- END MENU SIDEBAR-->

    <!-- PAGE CONTAINER-->
    <div class="page-container">
        <!-- HEADER DESKTOP-->
        <header class="header-desktop">
            <div class="section-content section-content-p30">
                <div class="container-fluid">
                    <div class="header-wrap">
                        <form class="form-header" method="post" th:action="@{/product/products_search/1}" id="getform">
                            <input class="au-input au-input-xl" type="text" name="value" id="value" th:object="${user}"
                                   placeholder="Szukaj produktów ..." form="getform"/>
                            <button class="au-btn-submit" type="submit" form="getform">
                                Szukaj
                            </button>
                        </form>
                        <div class="cart-area d-n">
                            <a th:href="@{/cart/}">
                                <div class="total" th:text="${total}"> <span th:text="${quantity}"> </span> </div> <i class="fa fa-shopping-cart"
                                                                                                                      aria-hidden="true"></i>
                            </a>
                        </div>
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropbtn"><img src="/images/nouser.png" height="1px"></a>
                            <div class="dropdown-content">
                                <a sec:authorize="isAuthenticated()" th:href="@{/order/allOrders}">Twoje zamowienia</a>

                                <a th:href="@{/login/showLoginPage}" sec:authorize="isAnonymous()" href="javascript: document.logoutForm.submit()" role="menuitem">Zaloguj się</a>
                                <a sec:authorize="isAuthenticated()" href="javascript: document.logoutForm.submit()" role="menuitem">Wyloguj sie</a>

                                <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
                                    <input hidden type="submit" value="Sign Out"/>
                                </form>
                                </ul>
                            </div>
                    </div>
                    <div class="account-wrap"></div>
                </div>
            </div>
        </header>
        <!-- END HEADER DESKTOP-->

        <!-- MAIN CONTENT-->
        <div class="main-content">
            <div class="section-content section-content-p30">
                <div class="container-fluid">

                    <h2 style=" text-align: center;">Sprawdz produkty będące aktualnie na promocji!</h2>

                    <div class="row">
                        <a th:href="@{/product/similiar}" th:if="${productList.isEmpty()}"><h1>Nie widzisz szukanego produktu, wyszukaj produkty podobne<br><br><br></h1></a>
                        <div class="col-md-3" th:each="product: ${productList}">
                            <div class="product-box">
                                <a th:href="@{/product/viewProduct/{productId}(productId=${product.id_product})}">
                                    <img th:src="${product.image}" class="img-responsive">
                                </a>
                                <a th:href="@{/product/viewProduct/{productId}(productId=${product.id_product})}">
                                    <h1 th:text="${product.getName()}"></h1>
                                    <h2 th:text="'Producent: '+${product.getProducent().getName()}"></h2>
                                    <h2 th:text="'Kategoria: '+${product.getId_category().getName()}"></h2>
                                    <h2 th:text="'Rozmiar: '+${product.getSize_age().getProduct_size()}"></h2>
                                    <h2 th:text="'Wiek: '+${product.getSize_age().getProduct_age()}"></h2>
                                </a>
                                <div class="price" th:text="'- '+ ${product.discount.toString().substring(0,2)} + ' %'" style="color: darkred"></div>
                                <div class="price"  th:text="${product.price} + ' zł'"></div>

                                <a class="primary-btn" type="button"
                                   th:href="@{/cart/add/{id_product}(id_product=${product.id_product},price_min=${price_min},price_max=${price_max},
											listOffAgesChecked=${agesCheckedList}, listOffCategoryChecked=${categoryCheckedListint})}"><i
                                        class="fa fa-shopping-cart"></i>  Dodaj do koszyka</a>

                            </div>
                        </div>


                    </div>







                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- END MAIN CONTENT-->

</div>
</div>

<!-- END PAGE CONTAINER-->


<footer class="footer spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="footer__about">
                    <ul>
                        <li>Adres: al. Tadeusza Rejtana 16C, Rzeszów</li>
                        <li>Phone: 123 456 789</li>
                        <li>Email: qerbitz@gmail.com</li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6 offset-lg-1">
                <div class="footer__widget">
                    <ul>

                        <li><a th:href="@{/login/showLoginPage}">Logowanie</a></li>
                        <li><a th:href="@{/registration/showRegistrationForm}" >Rejestracja</a></li>
                    </ul>

                </div>
            </div>
            <div class="col-lg-4 col-md-12">
                <div class="footer__widget">
                    <p>Zapraszamy również</p>
                    <div class="footer__widget__social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="footer__copyright">
                    <div class="footer__copyright__text"><p>
                        Copyright &copy; <script>document.write(new Date().getFullYear());</script> Krzysztof Pleśniak </a></p></div>
                    <div class="footer__copyright__payment"><img src="img/payment-item.png" alt=""></div>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="../static/css/test.js" th:src="@{/css/test.js}"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script th:inline="javascript">
    /*<!~[CDATA[*/
    var myval = /*[[${id_product}]]*/ "Test";
    var modal = document.getElementById("myModal");

    if(myval!=null){
        modal.style.display = "block";
    }



    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on <span> (x), close the modal

    /*]]>*/
</script>
</body>

</html>
